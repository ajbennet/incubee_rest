var h,l=this,aa=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b},ca=function(a){var b=ba;function c(){}c.prototype=b.prototype;a.ob=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.mb=function(a,c,g){for(var e=Array(arguments.length-2),k=2;k<arguments.length;k++)e[k-2]=arguments[k];return b.prototype[c].apply(a,e)}};var m={},n={},da=!1,p=function(a){try{da&&window.console&&window.console.log&&window.console.log(a)}catch(b){}},q=function(a,b){if(!a)return-1;if(a.indexOf)return a.indexOf(b,void 0);for(var c=0,f=a.length;c<f;c++)if(a[c]===b)return c;return-1},r=function(a,b){function c(){}if(!a)throw"Child class cannot be empty.";if(!b)throw"Parent class cannot be empty.";c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},ea=function(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var f=a[c];
if(null===f||void 0===f)f="";b.push(encodeURIComponent(c)+"="+encodeURIComponent(f))}return b.join("&")},fa=function(a){a=(new RegExp("[&#]"+a+"=([^&]*)")).exec(window.location.hash);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))},ga=function(a,b){var c=window;if(c.addEventListener)c.addEventListener(a,b,!1);else if(c.attachEvent)c.attachEvent("on"+a,b);else throw"Add event handler for "+a+" failed.";},ha=function(a){ga("message",a)},t=function(a,b){for(var c=(a||"").split(" "),f=(b||
"").split(" "),d=0;d<f.length;d++)if(f[d]&&0>q(c,f[d]))return!1;return!0},u=function(a){this.Ba=a||[];this.D={}};u.prototype.addEventListener=function(a,b){if(!(0<=q(this.Ba,a)))throw"Unrecognized event type: "+a;if("[object Function]"!==Object.prototype.toString.call(b))throw"The listener for event '"+a+"' is not a function.";this.D[a]||(this.D[a]=[]);0>q(this.D[a],b)&&this.D[a].push(b)};
u.prototype.dispatchEvent=function(a){var b=a.type;if(!(b&&0<=q(this.Ba,b)))throw"Failed to dispatch unrecognized event type: "+b;if(this.D[b]&&this.D[b].length)for(var c=0,f=this.D[b].length;c<f;c++)this.D[b][c](a)};
var ia=function(a){var b=0,c,f,d;if(a)for(c=0,d=a.length;c<d;c++)f=a.charCodeAt(c),b=(b<<5)-b+f,b|=0;return b},x=function(a){return!!a&&0<=a.indexOf(w.l)},ja=function(a,b){if(!a&&!b)return!0;if(!a||!b)return!1;var c=a.extraQueryParams,f=b.extraQueryParams;if(!c&&!f)return!0;if(!c||!f||Object.keys&&Object.keys(c).length!=Object.keys(f).length)return!1;for(var d in c)if(c[d]!==f[d])return!1;if(!Object.keys)for(d in f)if(c[d]!==f[d])return!1;return!0},w=w||{};w.aa="SID";w.pa="SSID";w.Da=100;w.ra="/oauth2/sessionstate/action/updateState";
w.la="/oauth2/sessionstate/action/checkOrigin";w.oa="/oauth2/permission/action/refresh";w.$="/oauth2/permission/action/listSessions";w.Ga="/o/oauth2/revoke";w.l="::";w.Z="_ss_";w.na="_tr_";w.ba="oauth2_ss";w.ma="oauth2_cs";w.qa="oauth2_tr";w.Ea="oauth2_is";w.X="oauth2_ar";w.lb=function(){var a={Z:1,na:2,ba:3,ma:4,qa:5,X:6},b;for(b in a)if(a=w[b],!a||0<=a.indexOf(w.l))throw"Invalid value for 'oauth2.spi."+b+"'.";};w.lb();w.Fa=512;
w.Ha=function(a){var b;(b=void 0===a.hint)||(b=a.hint,b=(""===b?!0:b?"string"==typeof b||"object"==typeof b&&b.constructor===String:!1)&&a.hint.length<=w.Fa);return!a.id&&b};w.Ta=function(){return"https:"==window.location.protocol?w.pa:w.aa};m=m||{};m.K=function(a){var b,c=m.Ra();c&&(a=c.match("(^|;) ?"+a+"=([^;]*)(;|$)"))&&2<a.length&&(b=a[2]);return b};m.Qa=function(a){var b;(a=m.K(a))&&(b=String(ia(a)));return b};m.Ra=function(){return document.cookie};m.Y="cookieValueChanged";
var y=function(a,b){this.ta=a;this.Wa=b;u.call(this,[m.Y])};r(y,u);y.prototype.K=function(){return m.K(this.ta)};var A=function(a){return m.Qa(a.ta)};y.prototype.addListener=function(a){this.addEventListener(m.Y,a)};
var la=function(a){void 0!==a.ja&&(window.clearInterval(a.ja),a.ja=void 0,p("IDP Session Cookie monitor is stoped."));a.V=a.K();a.ja=window.setInterval(ka(a),a.Wa);p("IDP Session Cookie monitor is started.")},ka=function(a){return function(){var b=a.K();if(a.V!=b){var c={type:m.Y,newHash:b&&ia(b),oldHash:a.V&&ia(a.V)};a.V=b;a.dispatchEvent(c)}}},ma=function(a,b){this.b=a;this.Ca=b},na=function(a,b,c){var f=w.Ga,d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var a;
d.responseText&&(a=window.JSON.parse(d.responseText));c(a)}};d.open("POST",f,!0);d.setRequestHeader("Content-type","application/x-www-form-urlencoded");var g="xsrfToken=";a.Ca&&(g+=a.Ca);if(b)for(var e in b)e&&b[e]&&(g+="&"+e+"="+encodeURIComponent(b[e]));p("Call "+f+" with postData: "+g);d.send(g)},B=function(a,b,c,f,d){var g=new XMLHttpRequest;g.onreadystatechange=function(){if(4==g.readyState&&200==g.status){var a;g.responseText&&(a=window.JSON.parse(g.responseText));f(a)}};if(b=ea(b))a+=0>a.indexOf("?")?
"?":"&",a+=b;g.open("GET",a,!0);d&&(g.withCredentials=!0);if(c)for(var e in c)if(c.hasOwnProperty(e)){d=c[e];if(null===d||void 0===d)d="";g.setRequestHeader(e,d)}p("Call "+a+" with Get method.");g.send()},oa=function(a,b,c){B(w.la,{origin:a.b,client_id:b},null,c,!1)},pa=function(a,b,c){b&&b.length?B(w.ra,{login_hint:b.join(" "),origin:a.b},null,c,!1):c({activeHints:{}})},qa=function(a,b,c){b.origin=a.b;delete b.redirect_uri;B(w.oa,b,null,c,!1)},ra=function(a,b,c){b.origin=a.b;b.redirect_uri=void 0;
b.response_type=void 0;B(w.$,b,null,c,!1)},sa=function(a,b,c){na(a,{token:b},c)},n=n||{},ta=function(){};ta.prototype.v=function(){return!1};var ua={};n.eb=function(){var a=new C;if(!a)throw"policy cannot be empty.";if(n.va("DEFAULT"))throw"Duplicate policyName [DEFAULT].";ua.DEFAULT=a};n.va=function(a){for(var b in ua)if(a==b)return!0;return!1};n.ua=function(a){return a&&n.va(a)?a:"DEFAULT"};n.Sa=function(a){return ua[n.ua(a)]};n.v=function(a,b,c,f){return n.Sa(f).v(a,b,c)};
n.nb=function(a,b,c,f){if(!n.v(a,b,c,f))throw"permission_error";};var D=function(){};r(D,ta);D.prototype.v=function(a,b,c){a=c?this.ea(a):this.fa(a);return 0<=q(a,b)};D.prototype.fa=function(a){var b=[];if(a&&(b.push(a),"http://"==a.substring(0,7)||"https://"==a.substring(0,8))){var c=document.createElement("a");c.href=a;a!=c.protocol+"//"+c.hostname&&b.push(c.protocol+"//"+c.hostname);"https:"==c.protocol&&b.push("http://"+c.hostname)}return b};
D.prototype.ea=function(a){var b=[];if(a){b.push(a);var c=document.createElement("a");c.href=a;if("http:"==c.protocol||"https:"==c.protocol)for(a=c.hostname.split(".");1<a.length;)b.push(c.protocol+"//"+a.join(".")),"https:"==c.protocol&&b.push("http://"+a.join(".")),a.shift()}return b};var C=function(){};r(C,ta);C.prototype.v=function(a,b,c){a=c?this.ea(a):this.fa(a);return 0<=q(a,b)};
C.prototype.fa=function(a){var b=[];if(a&&(b.push(a),"https://"==a.substring(0,8))){var c=document.createElement("a");c.href=a;""!=c.port&&0!=c.port&&443!=c.port||b.push("http://"+c.hostname)}return b};
C.prototype.ea=function(a){var b=[];if(a){var c=document.createElement("a");c.href=a;if("https:"==c.protocol&&(""==c.port||0==c.port||443==c.port)||"http:"==c.protocol&&(""==c.port||0==c.port||80==c.port))for(a=c.hostname.split(".");1<a.length;)b.push(c.protocol+"//"+a.join(".")),"https:"==c.protocol&&b.push("http://"+a.join(".")),a.shift();else b.push(a)}return b};n.eb();var n=n||{},va=function(){};h=va.prototype;h.M=function(){throw Error("unimplemented abstract method");};
h.j=function(){throw Error("unimplemented abstract method");};h.J=function(){throw Error("unimplemented abstract method");};h.i=function(){throw Error("unimplemented abstract method");};h.g=function(){throw Error("unimplemented abstract method");};var E=function(){};r(E,va);E.prototype.M=function(){return!1};E.prototype.B=function(a){return this.M(a)?window.localStorage:window.sessionStorage};
E.prototype.i=function(a,b){var c,f=this.j(a),d=this.B(a).getItem(f);if(d)try{var g=window.JSON.parse(d);g.cookieHash!=b?this.B(a).removeItem(f):c=g&&g.cachedValue}catch(e){}return c};E.prototype.g=function(a,b,c){var f=this.j(a);void 0===b||null===b?this.B(a).removeItem(f):this.B(a).setItem(f,JSON.stringify({cookieHash:c,cachedValue:b}))};var F=function(){};r(F,va);F.prototype.M=function(){return!1};F.prototype.B=function(a){return this.M(a)?window.localStorage:window.sessionStorage};
F.prototype.i=function(a){var b;if(a=this.B(a).getItem(this.j(a)))try{var c=window.JSON.parse(a);b=c&&c.cachedValue}catch(f){}return b};F.prototype.g=function(a,b){var c=this.j(a);void 0===b||null===b?this.B(a).removeItem(c):this.B(a).setItem(c,JSON.stringify({cachedValue:b}))};var G=function(){};r(G,F);G.prototype.M=function(){return!0};G.prototype.j=function(a){return[w.X,a.origin,a.a,a.id].join(w.l)};
G.prototype.J=function(a){var b={};a&&(a=a.split(w.l),4==a.length&&(b.origin=a[1],b.a=a[2],b.id=a[3]));return b};var H=function(){};r(H,E);H.prototype.j=function(a){return[w.ma,a.origin,a.a].join(w.l)};H.prototype.J=function(a){a=a.split(w.l);var b={};3==a.length&&(b.origin=a[1],b.a=a[2]);return b};var I=function(){};r(I,E);I.prototype.j=function(a){return[w.Ea,a.origin,a.a].join(w.l)};
I.prototype.i=function(a,b){var c,f=E.prototype.i.call(this,a,b);f&&f.expires_at&&(6E4>f.expires_at-(new Date).getTime()?window.sessionStorage.removeItem(this.j(a)):t(f.scope,a.scope)&&t(a.scope,f.scope)?(c=f,c.La=Math.floor((c.expires_at-(new Date).getTime())/1E3)):window.sessionStorage.removeItem(this.j(a)));return c};I.prototype.g=function(a,b,c){var f;b&&b.expires_at&&18E4<b.expires_at-(new Date).getTime()&&(f=b);E.prototype.g.call(this,a,f,c)};var J=function(){};r(J,F);J.prototype.M=function(a){return!a.xa};
J.prototype.j=function(a){return[w.ba,a.domain,a.S?"1":"0",n.ua(a.F),a.id||w.Z].join(w.l)};J.prototype.J=function(a){a=a.split(w.l);var b={};5==a.length&&(b.domain=a[1],b.S="1"==a[2],b.F=a[3],b.id=a[4]);"DEFAULT"==b.F&&delete b.F;b.id==w.Z&&delete b.id;return b};var K=function(a){this.bb=a||w.qa};r(K,E);K.prototype.j=function(a){return[this.bb,a.origin,a.a,a.id||w.na].join(w.l)};
K.prototype.i=function(a,b){var c=E.prototype.i.call(this,a,b);if(c&&c.N&&c.N.expires_at){if(a.Za==c.N.login_hint&&!(6E4>c.N.expires_at-(new Date).getTime())&&t(c.N.scope,a.scope)&&t(c.responseType,a.responseType))return c=c.N,c.La=Math.floor((c.expires_at-(new Date).getTime())/1E3),c;window.sessionStorage.removeItem(this.j(a))}};K.prototype.g=function(a,b,c){var f;b&&b.expires_at&&18E4<b.expires_at-(new Date).getTime()&&(f={N:b,responseType:a.responseType});E.prototype.g.call(this,a,f,c)};
var wa=function(a,b){this.b=a;this.ia=b;this.U={};this.T={}},xa=function(a,b){if(!b)throw"message object cannot be null.";b.rpcToken=a.ia;var c=JSON.stringify(b);p("IDP IFrame sends message: "+c);window.parent.postMessage(c,a.b)},L=function(a,b,c){b&&xa(a,{id:b,result:c})};
wa.prototype.cb=function(a){if(a.source==window.parent&&a.origin==this.b){p("IDP Session State IFrame receive message:"+a.data);try{var b=window.JSON.parse(a.data)}catch(c){return}(b.rpcToken||this.ia)&&b.rpcToken!=this.ia?p("RPC token mismatch."):b&&b.method&&this.U[b.method]?(a=this.U[b.method],a.rpcIdRequired&&!b.id?p("Bad request."):a.validator&&!a.validator(b)?(p("Bad request."),xa(this,{id:b.id,error:"Bad request."})):a.handler(b)):p("Bad request.")}};
var M=function(a,b){if(b&&b.type&&a.T[b.type]){var c=a.T[b.type].filter;c&&!c(b)||xa(a,{method:"fireIdpEvent",params:b})}else p("Invalid event type.")},ya=function(a,b){a.U={};a.T={};if(b){if(b.rpcs)for(var c=0;c<b.rpcs.length;c++){var f=b.rpcs[c];if(!f.method||!f.handler)throw"Error in RPC policy: method or handler is empty.";if(a.U[f.method])throw"Error in RPC policy: duplicate entry for RPC '"+f.method+"'.";a.U[f.method]={handler:f.handler,rpcIdRequired:f.rpcIdRequired,validator:f.validator}}if(b.events)for(c=
0;c<b.events.length;c++){f=b.events[c];if(!f.type)throw"Error in Event policy: type is empty.";if(a.T[f.type])throw"Error in Event policy: duplicate entry for type '"+f.type+"'.";a.T[f.type]={filter:f.filter}}}},za=function(a,b,c,f){M(a,{type:"sessionStateChanged",clientId:b,user:c,sessionState:f})},Aa=function(a){var b=new J,c=w.ba+w.l;return function(f){if(f.key&&0===f.key.indexOf(c)){var d=b.J(f.key);if(n.v(a.b,d.domain,d.S,d.F)){var g;if(f.newValue)try{var e=JSON.parse(f.newValue);e&&(g=e.cachedValue)}catch(k){return}M(a,
{type:"sessionSelectorChanged",newValue:g,crossSubDomains:d.S,perBrowserSession:!1,domain:d.domain,policy:d.F,id:d.id})}}}},Ba=function(a){var b=new G,c=[w.X,a.b].join(w.l)+w.l;return function(f){if(f.key&&0===f.key.indexOf(c)&&f.newValue){var d;try{d=window.JSON.parse(f.newValue)}catch(g){return}d&&d.cachedValue&&(f=b.J(f.key),M(a,{type:"authResult",clientId:f.a,id:f.id,authResult:d.cachedValue}))}}},Ca=function(a,b){this.b=a;this.u=b;this.sa=new H;this.za=new J;this.ka=new K;this.L=new I},N=function(a,
b,c,f){a.sa.g({origin:a.b,a:b},{user:c.A,session:c.A?c.G:void 0},f)},Da=function(a,b){return a.sa.i({origin:a.b,a:b},A(a.u))},Ea=function(a,b,c,f,d,g){return a.ka.i({Za:b,origin:a.b,a:c,responseType:f,scope:d,id:g},A(a.u))};Ca.prototype.v=function(a,b,c){return n.v(this.b,a,b,c)};
var Fa=function(a,b,c){return a.L.i({origin:a.b,a:b,scope:c},A(a.u))},Ga=function(a,b,c){this.I=a;this.c=b;this.f=c},Ha=function(a,b,c){a.A?c&&void 0!==c[a.A]?(c=c[a.A],ja(a.G,c)||(a.G=c,N(a.f,a.I,a,b),za(a.c,a.I,a.A,a.G))):a.G&&(a.G=void 0,N(a.f,a.I,a,b),za(a.c,a.I,a.A,void 0)):b&&za(a.c,a.I,a.A,void 0)},Ja=function(a,b,c,f){this.u=a;this.c=b;this.C=c;this.f=f;this.s={};var d=this;this.u.addListener(function(a){Ia(d,a)})},Ka=function(a){var b=[],c;for(c in a.s){var f=a.s[c].A;f&&b.push(f)}return b},
Ia=function(a,b){if(b.newHash)pa(a.C,Ka(a),function(c){for(var d in a.s)Ha(a.s[d],b.newHash,c&&c.activeHints)});else for(var c in a.s)Ha(a.s[c],b.newHash,void 0)},La=function(a,b,c,f){var d=a.s[b];d||(d=new Ga(b,a.c,a.f),a.s[b]=d);a=d;b=c.login_hint;c=c.session_state;a.A!=b&&(a.A=b,a.G=b?c:void 0,N(a.f,a.I,a,f))},Ma=function(a,b,c){var f=a.s[b];if(f)c(!0);else{var d=Da(a.f,b);d?(f=new Ga(b,a.c,a.f),a.s[b]=f,f.A=d.user,f.G=d.session,c(!0)):oa(a.C,b,function(d){d&&d.valid?(d=new Ga(b,a.c,a.f),a.s[b]=
d,N(a.f,b,d,A(a.u)),c(!0)):c(!1)})}},O=function(a,b,c){this.b=a;this.c=new wa(a,b);this.u=new y(w.aa,w.Da);this.C=new ma(a,c);this.f=new Ca(a,this.u);this.R=new Ja(this.u,this.c,this.C,this.f)};h=O.prototype;h.start=function(){ya(this.c,this.da());var a=this;ha(function(){a.c.cb.apply(a.c,arguments)});ga("storage",Aa(this.c));ga("storage",Ba(this.c));la(this.u);M(this.c,{type:"idpReady"});p("Initialize IDP IFrame successfully.")};
h.$a=function(a){var b=this;Ma(this.R,(a.params||{}).clientId,function(c){L(b.c,a.id,c)})};
h.Na=function(a){var b=a.params||{},c=this,f=b.clientId,d=b.loginHint,g=b.request,e=b.sessionSelector;g.client_id=f;g.login_hint=d;g.ss_domain=e.domain;var k=A(this.u);if(k){if(!b.forceRefresh&&(d=Ea(this.f,d,f,g.response_type,g.scope,b.id))&&18E4<d.expires_at-(new Date).getTime()){La(this.R,f,d,k);L(c.c,a.id,d);return}qa(this.C,g,function(d){if(d&&!d.error&&d.login_hint){d.first_issued_at=(new Date).getTime();d.expires_at=d.first_issued_at+1E3*d.expires_in;d.session_state||(d.session_state={});d.scope||
(d.scope=g.scope);var e=c.f;e.ka.g({origin:e.b,a:f,responseType:g.response_type,id:b.id},d,k);La(c.R,f,d,k)}d=d||{};L(c.c,a.id,d)})}else L(c.c,a.id,{error:"user_logged_out"})};h.fb=function(a){var b=a.params||{},c=b.clientId,f=this;sa(this.C,b.token,function(b){var g=f.f;window.sessionStorage.removeItem(g.ka.j({origin:g.b,a:c}));L(f.c,a.id,b)})};
h.Ma=function(a){var b=a.params||{},c;c=this.f;var f=b.domain,d=b.crossSubDomains,g=b.perBrowserSession,e=b.id,b=b.policy;if(!c.v(f,d,b))throw"Permission denied for '"+c.b+"' to read session selector for domain '"+f+"'.";c=c.za.i({domain:f,S:d,xa:g,F:b,id:e});L(this.c,a.id,c)};
h.jb=function(a){var b=a.params||{},c=b.hint,f=!!b.disabled,d=b.domain,g=b.crossSubDomains,e=b.perBrowserSession,k=b.id,b=b.policy,v;if(c||f)v={hint:c,disabled:f};c=this.f;f=v;if(!c.v(d,g,b))throw"Permission denied for '"+c.b+"' to write session selector for domain '"+d+"'.";c.za.g({domain:d,S:g,xa:e,F:b,id:k},f);M(this.c,{type:"sessionSelectorChanged",newValue:v,domain:d,crossSubDomains:g,perBrowserSession:e,id:k,policy:b});L(this.c,a.id,!0)};
h.Xa=function(a){var b=a.params||{},c=this,f=function(b){L(c.c,a.id,b)},d=b.clientId,g=b.request,e=b.sessionSelector;g.client_id=d;g.response_type="id_token";g.ss_domain=e.domain;var k=A(this.u);if(k){if(!b.forceRefresh&&(b=Fa(this.f,d,g.scope))){f(b);return}ra(this.C,g,function(a){if(a&&!a.error){a.first_issued_at=(new Date).getTime();a.expires_at=a.first_issued_at+1E3*a.expires_in;a.scope=g.scope;var b=c.f;b.L.g({origin:b.b,a:d},a,k)}a=a||{error:"No response returned from Server."};f(a)})}else f({scope:g.scope,
sessions:[]})};h.ab=function(a){a=a&&a.params||{};return a.clientId&&!x(a.clientId)};h.Va=function(a){var b=a&&a.params||{};a=b.loginHint;var c=!x(b.id),f=b.clientId&&!x(b.clientId),d=!!b.request,g=d&&b.request.scope;(b=(d=d&&b.request.response_type)&&0<=b.request.response_type.indexOf("code"))&&p("Bad request: 'code' response_type is not supported.");return a&&c&&f&&g&&d&&!b};
h.Ua=function(a){a=a&&a.params||{};var b=a.domain&&!x(a.domain),c=!x(a.policy);return!x(a.id)&&b&&c&&this.f.v(a.domain,!!a.crossSubDomains,a.policy)};h.kb=function(a){a=a&&a.params||{};var b=a.domain&&!x(a.domain),c=!x(a.policy);return!x(a.id)&&b&&c&&this.f.v(a.domain,!!a.crossSubDomains,a.policy)&&w.Ha(a)};h.Ya=function(a){a=a&&a.params||{};var b=a.clientId&&!x(a.clientId),c=!!a.request&&a.request.scope;return!x(a.id)&&b&&c};
h.gb=function(a){a=a&&a.params||{};var b=!!a.token,c=a.clientId&&!x(a.clientId);return!x(a.id)&&b&&c};h.ib=function(a){var b;if(b=a.clientId)a=a.clientId,b=!(!a||!this.R.s[a]);return b};h.Ia=function(a){var b;if(b=a.clientId)b=a.clientId,b=!(!b||!this.R.s[b]);return b&&a.id&&a.authResult};h.hb=function(a){return a.domain&&this.f.v(a.domain,a.crossSubDomains,a.policy)};var P=function(a,b){return function(){return b.apply(a,arguments)}};
O.prototype.da=function(){var a={rpcs:[],events:[]};Na(this,a);return a};
var Na=function(a,b){b.rpcs.push({method:"monitorClient",handler:P(a,a.$a),rpcIdRequired:!1,validator:P(a,a.ab)});b.rpcs.push({method:"getTokenResponse",handler:P(a,a.Na),rpcIdRequired:!0,validator:P(a,a.Va)});b.rpcs.push({method:"getSessionSelector",handler:P(a,a.Ma),rpcIdRequired:!0,validator:P(a,a.Ua)});b.rpcs.push({method:"setSessionSelector",handler:P(a,a.jb),rpcIdRequired:!1,validator:P(a,a.kb)});b.rpcs.push({method:"listIdpSessions",handler:P(a,a.Xa),rpcIdRequired:!0,validator:P(a,a.Ya)});
b.rpcs.push({method:"revoke",handler:P(a,a.fb),validator:P(a,a.gb)});b.events.push({type:"idpReady"});b.events.push({type:"sessionStateChanged",filter:P(a,a.ib)});b.events.push({type:"sessionSelectorChanged",filter:P(a,a.hb)});b.events.push({type:"authResult",filter:P(a,a.Ia)})};var Oa=function(a){for(var b=[],c=0,f=0;f<a.length;f++){for(var d=a.charCodeAt(f);255<d;)b[c++]=d&255,d>>=8;b[c++]=d}return b};var Q;a:{var Pa=l.navigator;if(Pa){var Qa=Pa.userAgent;if(Qa){Q=Qa;break a}}Q=""};var Ra=-1!=Q.indexOf("Opera")||-1!=Q.indexOf("OPR"),Sa=-1!=Q.indexOf("Trident")||-1!=Q.indexOf("MSIE"),Ta=-1!=Q.indexOf("Edge"),Ua=-1!=Q.indexOf("Gecko")&&!(-1!=Q.toLowerCase().indexOf("webkit")&&-1==Q.indexOf("Edge"))&&!(-1!=Q.indexOf("Trident")||-1!=Q.indexOf("MSIE"))&&-1==Q.indexOf("Edge"),Va=-1!=Q.toLowerCase().indexOf("webkit")&&-1==Q.indexOf("Edge"),Wa=function(){var a=Q;if(Ua)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Ta)return/Edge\/([\d\.]+)/.exec(a);if(Sa)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);
if(Va)return/WebKit\/(\S+)/.exec(a)};(function(){if(Ra&&l.opera){var a=l.opera.version;return"function"==aa(a)?a():a}var a="",b=Wa();b&&(a=b?b[1]:"");return Sa&&(b=(b=l.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();var R=null;var ba=function(){this.m=-1};var S=function(a,b,c){this.m=-1;this.w=a;this.m=c||a.m||16;this.wa=Array(this.m);this.ha=Array(this.m);a=b;a.length>this.m&&(this.w.update(a),a=this.w.digest(),this.w.reset());for(c=0;c<this.m;c++)b=c<a.length?a[c]:0,this.wa[c]=b^92,this.ha[c]=b^54;this.w.update(this.ha)};ca(S);S.prototype.reset=function(){this.w.reset();this.w.update(this.ha)};S.prototype.update=function(a,b){this.w.update(a,b)};
S.prototype.digest=function(){var a=this.w.digest();this.w.reset();this.w.update(this.wa);this.w.update(a);return this.w.digest()};var T=function(){this.m=-1;this.m=64;this.h=Array(4);this.Ja=Array(this.m);this.W=this.P=0;this.reset()};ca(T);T.prototype.reset=function(){this.h[0]=1732584193;this.h[1]=4023233417;this.h[2]=2562383102;this.h[3]=271733878;this.W=this.P=0};
var Xa=function(a,b,c){c||(c=0);var f=Array(16);if("string"==typeof b)for(var d=0;16>d;++d)f[d]=b.charCodeAt(c++)|b.charCodeAt(c++)<<8|b.charCodeAt(c++)<<16|b.charCodeAt(c++)<<24;else for(d=0;16>d;++d)f[d]=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;b=a.h[0];c=a.h[1];var d=a.h[2],g=a.h[3],e=0,e=b+(g^c&(d^g))+f[0]+3614090360&4294967295;b=c+(e<<7&4294967295|e>>>25);e=g+(d^b&(c^d))+f[1]+3905402710&4294967295;g=b+(e<<12&4294967295|e>>>20);e=d+(c^g&(b^c))+f[2]+606105819&4294967295;d=g+(e<<17&4294967295|e>>>
15);e=c+(b^d&(g^b))+f[3]+3250441966&4294967295;c=d+(e<<22&4294967295|e>>>10);e=b+(g^c&(d^g))+f[4]+4118548399&4294967295;b=c+(e<<7&4294967295|e>>>25);e=g+(d^b&(c^d))+f[5]+1200080426&4294967295;g=b+(e<<12&4294967295|e>>>20);e=d+(c^g&(b^c))+f[6]+2821735955&4294967295;d=g+(e<<17&4294967295|e>>>15);e=c+(b^d&(g^b))+f[7]+4249261313&4294967295;c=d+(e<<22&4294967295|e>>>10);e=b+(g^c&(d^g))+f[8]+1770035416&4294967295;b=c+(e<<7&4294967295|e>>>25);e=g+(d^b&(c^d))+f[9]+2336552879&4294967295;g=b+(e<<12&4294967295|
e>>>20);e=d+(c^g&(b^c))+f[10]+4294925233&4294967295;d=g+(e<<17&4294967295|e>>>15);e=c+(b^d&(g^b))+f[11]+2304563134&4294967295;c=d+(e<<22&4294967295|e>>>10);e=b+(g^c&(d^g))+f[12]+1804603682&4294967295;b=c+(e<<7&4294967295|e>>>25);e=g+(d^b&(c^d))+f[13]+4254626195&4294967295;g=b+(e<<12&4294967295|e>>>20);e=d+(c^g&(b^c))+f[14]+2792965006&4294967295;d=g+(e<<17&4294967295|e>>>15);e=c+(b^d&(g^b))+f[15]+1236535329&4294967295;c=d+(e<<22&4294967295|e>>>10);e=b+(d^g&(c^d))+f[1]+4129170786&4294967295;b=c+(e<<
5&4294967295|e>>>27);e=g+(c^d&(b^c))+f[6]+3225465664&4294967295;g=b+(e<<9&4294967295|e>>>23);e=d+(b^c&(g^b))+f[11]+643717713&4294967295;d=g+(e<<14&4294967295|e>>>18);e=c+(g^b&(d^g))+f[0]+3921069994&4294967295;c=d+(e<<20&4294967295|e>>>12);e=b+(d^g&(c^d))+f[5]+3593408605&4294967295;b=c+(e<<5&4294967295|e>>>27);e=g+(c^d&(b^c))+f[10]+38016083&4294967295;g=b+(e<<9&4294967295|e>>>23);e=d+(b^c&(g^b))+f[15]+3634488961&4294967295;d=g+(e<<14&4294967295|e>>>18);e=c+(g^b&(d^g))+f[4]+3889429448&4294967295;c=
d+(e<<20&4294967295|e>>>12);e=b+(d^g&(c^d))+f[9]+568446438&4294967295;b=c+(e<<5&4294967295|e>>>27);e=g+(c^d&(b^c))+f[14]+3275163606&4294967295;g=b+(e<<9&4294967295|e>>>23);e=d+(b^c&(g^b))+f[3]+4107603335&4294967295;d=g+(e<<14&4294967295|e>>>18);e=c+(g^b&(d^g))+f[8]+1163531501&4294967295;c=d+(e<<20&4294967295|e>>>12);e=b+(d^g&(c^d))+f[13]+2850285829&4294967295;b=c+(e<<5&4294967295|e>>>27);e=g+(c^d&(b^c))+f[2]+4243563512&4294967295;g=b+(e<<9&4294967295|e>>>23);e=d+(b^c&(g^b))+f[7]+1735328473&4294967295;
d=g+(e<<14&4294967295|e>>>18);e=c+(g^b&(d^g))+f[12]+2368359562&4294967295;c=d+(e<<20&4294967295|e>>>12);e=b+(c^d^g)+f[5]+4294588738&4294967295;b=c+(e<<4&4294967295|e>>>28);e=g+(b^c^d)+f[8]+2272392833&4294967295;g=b+(e<<11&4294967295|e>>>21);e=d+(g^b^c)+f[11]+1839030562&4294967295;d=g+(e<<16&4294967295|e>>>16);e=c+(d^g^b)+f[14]+4259657740&4294967295;c=d+(e<<23&4294967295|e>>>9);e=b+(c^d^g)+f[1]+2763975236&4294967295;b=c+(e<<4&4294967295|e>>>28);e=g+(b^c^d)+f[4]+1272893353&4294967295;g=b+(e<<11&4294967295|
e>>>21);e=d+(g^b^c)+f[7]+4139469664&4294967295;d=g+(e<<16&4294967295|e>>>16);e=c+(d^g^b)+f[10]+3200236656&4294967295;c=d+(e<<23&4294967295|e>>>9);e=b+(c^d^g)+f[13]+681279174&4294967295;b=c+(e<<4&4294967295|e>>>28);e=g+(b^c^d)+f[0]+3936430074&4294967295;g=b+(e<<11&4294967295|e>>>21);e=d+(g^b^c)+f[3]+3572445317&4294967295;d=g+(e<<16&4294967295|e>>>16);e=c+(d^g^b)+f[6]+76029189&4294967295;c=d+(e<<23&4294967295|e>>>9);e=b+(c^d^g)+f[9]+3654602809&4294967295;b=c+(e<<4&4294967295|e>>>28);e=g+(b^c^d)+f[12]+
3873151461&4294967295;g=b+(e<<11&4294967295|e>>>21);e=d+(g^b^c)+f[15]+530742520&4294967295;d=g+(e<<16&4294967295|e>>>16);e=c+(d^g^b)+f[2]+3299628645&4294967295;c=d+(e<<23&4294967295|e>>>9);e=b+(d^(c|~g))+f[0]+4096336452&4294967295;b=c+(e<<6&4294967295|e>>>26);e=g+(c^(b|~d))+f[7]+1126891415&4294967295;g=b+(e<<10&4294967295|e>>>22);e=d+(b^(g|~c))+f[14]+2878612391&4294967295;d=g+(e<<15&4294967295|e>>>17);e=c+(g^(d|~b))+f[5]+4237533241&4294967295;c=d+(e<<21&4294967295|e>>>11);e=b+(d^(c|~g))+f[12]+1700485571&
4294967295;b=c+(e<<6&4294967295|e>>>26);e=g+(c^(b|~d))+f[3]+2399980690&4294967295;g=b+(e<<10&4294967295|e>>>22);e=d+(b^(g|~c))+f[10]+4293915773&4294967295;d=g+(e<<15&4294967295|e>>>17);e=c+(g^(d|~b))+f[1]+2240044497&4294967295;c=d+(e<<21&4294967295|e>>>11);e=b+(d^(c|~g))+f[8]+1873313359&4294967295;b=c+(e<<6&4294967295|e>>>26);e=g+(c^(b|~d))+f[15]+4264355552&4294967295;g=b+(e<<10&4294967295|e>>>22);e=d+(b^(g|~c))+f[6]+2734768916&4294967295;d=g+(e<<15&4294967295|e>>>17);e=c+(g^(d|~b))+f[13]+1309151649&
4294967295;c=d+(e<<21&4294967295|e>>>11);e=b+(d^(c|~g))+f[4]+4149444226&4294967295;b=c+(e<<6&4294967295|e>>>26);e=g+(c^(b|~d))+f[11]+3174756917&4294967295;g=b+(e<<10&4294967295|e>>>22);e=d+(b^(g|~c))+f[2]+718787259&4294967295;d=g+(e<<15&4294967295|e>>>17);e=c+(g^(d|~b))+f[9]+3951481745&4294967295;a.h[0]=a.h[0]+b&4294967295;a.h[1]=a.h[1]+(d+(e<<21&4294967295|e>>>11))&4294967295;a.h[2]=a.h[2]+d&4294967295;a.h[3]=a.h[3]+g&4294967295};
T.prototype.update=function(a,b){void 0===b&&(b=a.length);for(var c=b-this.m,f=this.Ja,d=this.P,g=0;g<b;){if(0==d)for(;g<=c;)Xa(this,a,g),g+=this.m;if("string"==typeof a)for(;g<b;){if(f[d++]=a.charCodeAt(g++),d==this.m){Xa(this,f);d=0;break}}else for(;g<b;)if(f[d++]=a[g++],d==this.m){Xa(this,f);d=0;break}}this.P=d;this.W+=b};
T.prototype.digest=function(){var a=Array((56>this.P?this.m:2*this.m)-this.P);a[0]=128;for(var b=1;b<a.length-8;++b)a[b]=0;for(var c=8*this.W,b=a.length-8;b<a.length;++b)a[b]=c&255,c/=256;this.update(a);a=Array(16);for(b=c=0;4>b;++b)for(var f=0;32>f;f+=8)a[c++]=this.h[b]>>>f&255;return a};var Za=function(a,b,c){b.origin=a.b;b.privileged=!0;b.redirect_uri=void 0;b.response_type=void 0;B(w.$,b,Ya(a),c,!1)},$a=function(a,b,c,f){B(window.NOW_SERVER_URL||"https://clients1.google.com/nowapi/webauth",{origin:a.b,client_id:b,user_ids:c.join(";")},Ya(a),f,!0)},ab=function(a,b,c){B("/o/oauth2/auth",{origin:a.b,client_id:b.client_id,login_hint:b.login_hint,response_type:"code",access_type:"offline",scope:"https://www.googleapis.com/auth/googlenow.publish",redirect_uri:"xhr",timestamp:b.timestamp,
signature:b.signature,signed_by:"google_now"},Ya(a),c,!1)},Ya=function(a){var b={},c=m.K(w.Ta());if(c){a=a.b;if(!a||!c)throw Error("RP origin and session cookie value cannot be empty.");c=new S(new T,Oa(c));a=Oa(a);c.reset();c.update(a);c=c.digest();a=aa(c);if("array"!=a&&("object"!=a||"number"!=typeof c.length))throw Error("encodeByteArray takes an array as a parameter");if(!R)for(R={},a=0;65>a;a++)R[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a);a=R;for(var f=[],
d=0;d<c.length;d+=3){var g=c[d],e=d+1<c.length,k=e?c[d+1]:0,v=d+2<c.length,z=v?c[d+2]:0,db=g>>2,g=(g&3)<<4|k>>4,k=(k&15)<<2|z>>6,z=z&63;v||(z=64,e||(k=64));f.push(a[db],a[g],a[k],a[z])}b["X-Csrf-Token"]=f.join("")}return b};var U=function(){};r(U,F);U.prototype.j=function(a){return["now_as",a.O,a.a||"ALL_CLIENTS"].join(w.l)};U.prototype.J=function(a){var b={};if(a){a=a.split(w.l);if("now_as"!==a[0]||3!=a.length)throw Error("Invalid assertion cache key.");b.O=a[1];b.a="ALL_CLIENTS"==a[2]?void 0:a[2]}return b};U.prototype.i=function(a,b){var c,f=F.prototype.i.call(this,a,b);f&&f.e&&(f.e<(new Date).getTime()?this.B(a).removeItem(this.j(a)):c=f.o);return c};
U.prototype.g=function(a,b,c){if(void 0!==b){var f=!!b;if(f&&!a.a)throw Error("Cannot cache all clients enabled for a user.");b={};b.o=f;b.e=(new Date).getTime()+864E5}F.prototype.g.call(this,a,b,c)};var V=function(){};r(V,E);V.prototype.j=function(a){return["now_gs",a.origin,a.a].join(w.l)};V.prototype.i=function(a,b){var c,f=E.prototype.i.call(this,a,b);f&&f.expires_at&&(f.expires_at<=(new Date).getTime()?this.B(a).removeItem(this.j(a)):(f.expires_at=void 0,c=f));return c};V.prototype.g=function(a,b,c){b&&(b.expires_at=(new Date).getTime()+864E5);E.prototype.g.call(this,a,b,c)};O.prototype.Oa=function(a){var b=this;if(!bb(this,a.id)){var c=cb(this,a);c.ca?eb(this,c,function(a){a=fb(b,c,a);a.length?gb(b,c,a,function(a){hb(b,c,a.auth_request)}):W(c,"DISABLED")}):W(c,"DISABLED")}};
var bb=function(a,b){a.ga=a.ga||{};if(!a.ga.getCode)return a.ga.getCode=!0,!1;L(a.c,b,{error:"THROTTLED",detail:"The getCode() method has already been invoked."});return!0},cb=function(a,b){var c=b.params||{},f={a:c.clientId,Ka:c.emails,ya:function(c){L(a.c,b.id,c)}};f.ca=A(a.u);f.Aa={origin:a.b,a:c.clientId};return f},eb=function(a,b,c){a.L||(a.L=new V);var f=a.L.i(b.Aa,b.ca);f?c(f):Za(a.C,{client_id:b.a,scope:"https://www.googleapis.com/auth/googlenow.publish"},function(d){d&&d.sessions?(a.L.g(b.Aa,
d,b.ca),c(d)):W(b,"OTHER","Failed to get Google session information.")})},fb=function(a,b,c){a.H||(a.H=new U);var f=[];if(c.sessions)for(var d=0;d<c.sessions.length;d++){var g=c.sessions[d],e;if(e=g.emails)a:{e=b.Ka;for(var k=g.emails,v=0;v<e.length;v++)for(var z=0;z<k.length;z++)if(e[v]&&k[z]&&e[v].toLowerCase()===k[z].toLowerCase()){e=!0;break a}e=!1}if(e){if(g.login_hint)return[];if(g.obfuscatedGaiaId){e=a.H;k=g.obfuscatedGaiaId;v={O:k,a:b.a};if(e=!1===e.i({O:k})?!1:e.i(v))return[];void 0===e&&
f.push(g.obfuscatedGaiaId)}}}return f},gb=function(a,b,c,f){a.H||(a.H=new U);$a(a.C,b.a,c,function(d){if(d&&"DISABLED"!=d.status)if("THROTTLED"==d.status)W(b,"THROTTLED","Too many request from the client.");else{var g;if(g="OK"==d.status)g=d.auth_request,g=!!g&&g.origin==a.b&&g.client_id==b.a&&0<g.timestamp&&!!g.signature&&"google_now"==g.signed_by&&0<=q(c,g.login_hint);if(g){g=a.H;var e=d.auth_request.login_hint,k=b.a;g.g({O:e});g.g({O:e,a:k},!0);f(d)}else W(b,"OTHER","Unexpected response from Google Now server.")}else{if(d.users&&
d.users.length)for(g=0;g<d.users.length;g++)e=d.users[g],e.user_id&&a.H.g({O:e.user_id,a:e.disabled_for_all_clients?void 0:b.a},!1);W(b,"DISABLED")}})},hb=function(a,b,c){ab(a.C,c,function(a){a&&a.code?b.ya({code:a.code}):W(b,"OTHER",a.error||"Failed to get code.")})},W=function(a,b,c){a.ya({error:b,detail:c})};O.prototype.Pa=function(a){var b=a&&a.params||{};a=b.clientId&&!x(b.clientId);b=(b=b.emails)&&Array.isArray(b)&&b.length&&3>=b.length;return a&&b};O.prototype.da=function(){var a={rpcs:[],events:[]};ib(this,a);return a};var ib=function(a,b){b.rpcs.push({method:"now:getCode",handler:P(a,a.Oa),rpcIdRequired:!0,validator:P(a,a.Pa)})};O.prototype.da=function(){var a={rpcs:[],events:[]};Na(this,a);ib(this,a);return a};w.aa="APISID";w.pa="SAPISID";w.ra="/o/oauth2/iframerpc?action=sessionState";w.la="/o/oauth2/iframerpc?action=checkOrigin";w.oa="/o/oauth2/iframerpc?action=issueToken";w.$="/o/oauth2/iframerpc?action=listSessions";var jb=function(){var a=fa("origin");if(!a)throw"Failed to get parent origin from URL hash!";var b=fa("rpcToken");if(!b)throw"Failed to get rpcToken from URL hash!";var c=fa("debug");da="0"!=c&&!!c;(new O(a,b)).start()},X=["lso","startIdpIFrame"],Y=l;
X[0]in Y||!Y.execScript||Y.execScript("var "+X[0]);for(var Z;X.length&&(Z=X.shift());)X.length||void 0===jb?Y=Y[Z]?Y[Z]:Y[Z]={}:Y[Z]=jb;
